(()=>{var e={};e.id=857,e.ids=[857],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5296:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>u,routeModule:()=>m,tree:()=>d});var r=s(3137),a=s(4647),i=s(4183),o=s.n(i),n=s(1775),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=r.AppPageRouteModule,d=["",{children:["events",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9127)),"C:\\Users\\missa\\Downloads\\kretoss technology\\frontend\\app\\events\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5891)),"C:\\Users\\missa\\Downloads\\kretoss technology\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\missa\\Downloads\\kretoss technology\\frontend\\app\\events\\[id]\\page.tsx"],p="/events/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new c({definition:{kind:a.x.APP_PAGE,page:"/events/[id]/page",pathname:"/events/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},224:(e,t,s)=>{Promise.resolve().then(s.bind(s,4984))},4984:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>EventDetailsPage});var r=s(80),a=s(9885),i=s(7114),o=s(58),n=s(1014),l=s(3498);function EventDetailsPage(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),[s,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),m=(0,a.useMemo)(()=>{if(e&&e.id)return Array.isArray(e.id)?e.id[0]:e.id},[e]);(0,a.useEffect)(()=>{let e=!0,load=async()=>{if(m)try{let t=await o.d.getEvent(m);e&&c(t)}catch(t){e&&x("Failed to load event")}finally{e&&u(!1)}};return u(!0),load(),()=>{e=!1}},[m]);let bookEvent=async()=>{try{let e=(0,n.bW)();if(!e){t.push("/");return}if(!s){alert("Event not found");return}if(s.availableSeats<=0){alert("This event is sold out");return}console.log("Creating checkout session for event:",s._id);let r=await l.Z.post("/checkout/create-session",{eventId:s._id});if(console.log("Checkout session response:",r.data),r.data&&r.data.url)console.log("Redirecting to Stripe checkout:",r.data.url),window.location.href=r.data.url;else throw console.error("No checkout URL in response:",r.data),Error("No checkout URL received")}catch(t){console.error("Payment error:",t);let e=t.response?.data?.message||t.message||"Failed to start checkout";alert(`Payment Error: ${e}`)}};return d?null:p||!s?r.jsx("div",{className:"p-6 text-red-600",children:p||"Event not found"}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("img",{src:s.primaryImage.url,alt:s.title,className:"w-full h-80 object-cover"}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),r.jsx("p",{className:"mt-3 text-gray-700",children:s.description}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-600",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(s.date).toLocaleString()]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Location:"})," ",s.location]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Seats:"})," ",s.availableSeats," / ",s.totalSeats]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Price:"})," $",s.ticketPrice.toFixed(2)]})]}),s.secondaryImages.length>0&&r.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-3",children:s.secondaryImages.map(e=>r.jsx("img",{src:e.url,alt:s.title,className:"h-24 w-full object-cover rounded"},e.publicId))}),r.jsx("div",{className:"mt-8",children:r.jsx("button",{onClick:bookEvent,disabled:s.availableSeats<=0,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:s.availableSeats>0?"Book / Purchase Ticket":"Sold Out"})})]})]})})})}},9127:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>i,default:()=>l});var r=s(7536);let a=(0,r.createProxy)(String.raw`C:\Users\missa\Downloads\kretoss technology\frontend\app\events\[id]\page.tsx`),{__esModule:i,$$typeof:o}=a,n=a.default,l=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[416,503,58],()=>__webpack_exec__(5296));module.exports=s})();