(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{5521:function(e,t,r){Promise.resolve().then(r.bind(r,8287))},8287:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return UserDashboard}});var n=r(7437),s=r(2265),a=r(4033),o=r(9727);function UserDashboard(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),u=(0,a.useRouter)();return((0,s.useEffect)(()=>{let checkAuth=async()=>{let e=(0,o.bW)();if(!e){u.push("/");return}try{let e=await o.kv.getCurrentUser();if("user"!==e.user.role){(0,o.H6)(),u.push("/");return}t(e.user)}catch(e){(0,o.H6)(),u.push("/")}finally{i(!1)}};checkAuth()},[u]),r)?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Dashboard"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,n.jsx)("button",{onClick:()=>{(0,o.H6)(),u.push("/")},className:"btn-secondary",children:"Logout"})]})})}),(0,n.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Welcome to your Dashboard"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Browse and book events from our collection"}),(0,n.jsx)("button",{onClick:()=>u.push("/user"),className:"btn-primary",children:"Browse Events"})]})})]})}},9727:function(e,t,r){"use strict";r.d(t,{H6:function(){return removeAuthToken},bW:function(){return getAuthToken},kv:function(){return a},uB:function(){return setAuthToken}});var n=r(4771),s=r(1490);r(2265);let a={login:async(e,t)=>{let r=await n.Z.post("/auth/login",{email:e,password:t});return r.data},register:async(e,t,r,s)=>{let a=await n.Z.post("/auth/register",{name:e,email:t,password:r,role:s});return a.data},getCurrentUser:async()=>{let e=s.Z.get("token"),t=await n.Z.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});return t.data}},setAuthToken=e=>{s.Z.set("token",e,{expires:7})},removeAuthToken=()=>{s.Z.remove("token")},getAuthToken=()=>s.Z.get("token")},4771:function(e,t,r){"use strict";var n=r(4829),s=r(1490),a=r(5267);let o=n.Z.create({baseURL:"https://kretoss-task.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{var t;(null===(t=e.url)||void 0===t?void 0:t.includes("health"))||(0,a.VO)();let r=s.Z.get("token");if(r){let t=e.headers||{};t.Authorization="Bearer ".concat(r),e.headers=t}return e},e=>((0,a.Gx)(),Promise.reject(e))),o.interceptors.response.use(e=>((0,a.Gx)(),e),e=>{var t;return(0,a.Gx)(),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(s.Z.remove("token"),window.location.href="/"),Promise.reject(e)}),t.Z=o},5267:function(e,t,r){"use strict";r.d(t,{Gx:function(){return hideLoader},RF:function(){return isLoaderVisible},VO:function(){return showLoader},Yb:function(){return subscribeLoader}});let n=!1,s=new Set;function showLoader(){n||(n=!0,s.forEach(e=>e(!0)))}function hideLoader(){n&&(n=!1,s.forEach(e=>e(!1)))}function subscribeLoader(e){return s.add(e),()=>s.delete(e)}function isLoaderVisible(){return n}}},function(e){e.O(0,[745,971,864,744],function(){return e(e.s=5521)}),_N_E=e.O()}]);