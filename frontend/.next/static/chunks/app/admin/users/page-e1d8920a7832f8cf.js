(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{811:function(e,t,r){Promise.resolve().then(r.bind(r,2495))},2495:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return UsersPage}});var s=r(7437),a=r(2265),n=r(4033),i=r(9727),c=r(4771);function UsersPage(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(null),[l,d]=(0,a.useState)([]),[o,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let checkAuth=async()=>{let t=(0,i.bW)();if(!t){e.push("/");return}try{let t=await c.Z.get("/auth/me"),s=t.data.user;if("admin"!==s.role){e.push("/user");return}r(s)}catch(t){console.error("Auth check failed:",t),(0,i.H6)(),e.push("/")}};checkAuth()},[e]),(0,a.useEffect)(()=>{let loadUsers=async()=>{try{let e=await c.Z.get("/admin/users");d(e.data.users)}catch(e){console.error("Error loading users:",e)}finally{u(!1)}};t&&loadUsers()},[t]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Users"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"View and manage all registered users"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["All Users (",l.length,")"]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-primary-600",children:e.name.charAt(0).toUpperCase()})})}),(0,s.jsx)("div",{className:"ml-4",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("admin"===e.role?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.role})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))})]})})]})]})})}},9727:function(e,t,r){"use strict";r.d(t,{H6:function(){return removeAuthToken},bW:function(){return getAuthToken},kv:function(){return n},uB:function(){return setAuthToken}});var s=r(4771),a=r(1490);r(2265);let n={login:async(e,t)=>{let r=await s.Z.post("/auth/login",{email:e,password:t});return r.data},register:async(e,t,r,a)=>{let n=await s.Z.post("/auth/register",{name:e,email:t,password:r,role:a});return n.data},getCurrentUser:async()=>{let e=a.Z.get("token"),t=await s.Z.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});return t.data}},setAuthToken=e=>{a.Z.set("token",e,{expires:7})},removeAuthToken=()=>{a.Z.remove("token")},getAuthToken=()=>a.Z.get("token")},4771:function(e,t,r){"use strict";var s=r(4829),a=r(1490),n=r(5267);let i=s.Z.create({baseURL:"https://kretoss-task.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{var t;(null===(t=e.url)||void 0===t?void 0:t.includes("health"))||(0,n.VO)();let r=a.Z.get("token");if(r){let t=e.headers||{};t.Authorization="Bearer ".concat(r),e.headers=t}return e},e=>((0,n.Gx)(),Promise.reject(e))),i.interceptors.response.use(e=>((0,n.Gx)(),e),e=>{var t;return(0,n.Gx)(),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.Z.remove("token"),window.location.href="/"),Promise.reject(e)}),t.Z=i},5267:function(e,t,r){"use strict";r.d(t,{Gx:function(){return hideLoader},RF:function(){return isLoaderVisible},VO:function(){return showLoader},Yb:function(){return subscribeLoader}});let s=!1,a=new Set;function showLoader(){s||(s=!0,a.forEach(e=>e(!0)))}function hideLoader(){s&&(s=!1,a.forEach(e=>e(!1)))}function subscribeLoader(e){return a.add(e),()=>a.delete(e)}function isLoaderVisible(){return s}}},function(e){e.O(0,[745,971,864,744],function(){return e(e.s=811)}),_N_E=e.O()}]);