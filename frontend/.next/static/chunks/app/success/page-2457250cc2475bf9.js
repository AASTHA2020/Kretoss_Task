(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{5498:function(e,n,r){Promise.resolve().then(r.bind(r,9128))},9128:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return SuccessPage}});var t=r(7437),s=r(2265),o=r(4033),i=r(4771);function SuccessPage(){let e=(0,o.useSearchParams)(),n=(0,o.useRouter)();return(0,s.useEffect)(()=>{let confirm=async()=>{let n=e.get("session_id");if(console.log("Success page - Session ID:",n),!n){console.log("No session ID found");return}try{console.log("Confirming payment for session:",n),await i.Z.post("/checkout/confirm",{sessionId:n}),console.log("Payment confirmed successfully")}catch(e){console.error("Payment confirmation error:",e)}};confirm()},[e]),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-green-700",children:"Payment Successful!"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Your booking has been confirmed."}),(0,t.jsx)("button",{onClick:()=>n.push("/user"),className:"mt-6 btn-primary",children:"Go to Events"})]})})}},4771:function(e,n,r){"use strict";var t=r(4829),s=r(1490),o=r(5267);let i=t.Z.create({baseURL:"https://kretoss-task.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{var n;(null===(n=e.url)||void 0===n?void 0:n.includes("health"))||(0,o.VO)();let r=s.Z.get("token");return r&&(e.headers||(e.headers={}),e.headers.Authorization||(e.headers.Authorization="Bearer ".concat(r))),e},e=>((0,o.Gx)(),Promise.reject(e))),i.interceptors.response.use(e=>((0,o.Gx)(),e),e=>{var n;return(0,o.Gx)(),(null===(n=e.response)||void 0===n?void 0:n.status)===401&&(s.Z.remove("token"),window.location.href="/"),Promise.reject(e)}),n.Z=i},5267:function(e,n,r){"use strict";r.d(n,{Gx:function(){return hideLoader},RF:function(){return isLoaderVisible},VO:function(){return showLoader},Yb:function(){return subscribeLoader}});let t=!1,s=new Set;function showLoader(){t||(t=!0,s.forEach(e=>e(!0)))}function hideLoader(){t&&(t=!1,s.forEach(e=>e(!1)))}function subscribeLoader(e){return s.add(e),()=>s.delete(e)}function isLoaderVisible(){return t}}},function(e){e.O(0,[745,971,864,744],function(){return e(e.s=5498)}),_N_E=e.O()}]);