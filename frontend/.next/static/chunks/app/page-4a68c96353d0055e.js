(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9827:function(e,a,n){Promise.resolve().then(n.bind(n,2860))},2860:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Home}});var t=n(7437),s=n(2265),r=n(4033),l=n(9727);function LoginForm(e){let{role:a,onBack:n,onSwitchToSignup:i}=e,[o,d]=(0,s.useState)({email:"",password:""}),[c,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(""),x=(0,r.useRouter)(),handleChange=e=>{d({...o,[e.target.name]:e.target.value})},handleSubmit=async e=>{e.preventDefault(),u(!0),h("");try{let e=await l.kv.login(o.email,o.password);if(e.user.role!==a){h("Please use the ".concat(e.user.role," login form instead.")),u(!1);return}(0,l.uB)(e.token),"admin"===e.user.role?x.push("/admin-dashboard"):x.push("/user")}catch(e){var n,t;h((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Login failed. Please try again.")}finally{u(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 mb-4",children:"← Back to Welcome"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"admin"===a?"\uD83D\uDD10 Admin Login":"\uD83D\uDC64 User Login"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Sign in to your ",a," account"]})]}),m&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:m}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,onChange:handleChange,className:"input-field",required:!0,placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:o.password,onChange:handleChange,className:"input-field",required:!0,placeholder:"Enter your password"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full btn-primary py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Signing in...":"Sign In"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",(0,t.jsxs)("button",{onClick:i,className:"text-primary-600 hover:text-primary-700 font-medium",children:["Sign up as ",a]})]})})]})})})}function SignupForm(e){let{role:a,onBack:n,onSwitchToLogin:i}=e,[o,d]=(0,s.useState)({name:"",email:"",password:"",confirmPassword:""}),[c,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(""),x=(0,r.useRouter)(),handleChange=e=>{d({...o,[e.target.name]:e.target.value})},handleSubmit=async e=>{if(e.preventDefault(),u(!0),h(""),o.password!==o.confirmPassword){h("Passwords do not match"),u(!1);return}if(o.password.length<6){h("Password must be at least 6 characters"),u(!1);return}try{let e=await l.kv.register(o.name,o.email,o.password,a);(0,l.uB)(e.token),"admin"===e.user.role?x.push("/admin-dashboard"):x.push("/user")}catch(e){var n,t;h((null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Registration failed. Please try again.")}finally{u(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 mb-4",children:"← Back to Welcome"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"admin"===a?"\uD83D\uDD10 Admin Signup":"\uD83D\uDC64 User Signup"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Create your ",a," account"]})]}),m&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:m}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:handleChange,className:"input-field",required:!0,placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,onChange:handleChange,className:"input-field",required:!0,placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:o.password,onChange:handleChange,className:"input-field",required:!0,placeholder:"Enter your password (min 6 characters)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:handleChange,className:"input-field",required:!0,placeholder:"Confirm your password"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full btn-primary py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating account...":"Create Account"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",(0,t.jsxs)("button",{onClick:i,className:"text-primary-600 hover:text-primary-700 font-medium",children:["Sign in as ",a]})]})})]})})})}function Home(){let[e,a]=(0,s.useState)(null),[n,r]=(0,s.useState)(null),handleLoginClick=e=>{a(e),r(null)},handleSignupClick=e=>{r(e),a(null)},handleBackToWelcome=()=>{a(null),r(null)};return e?(0,t.jsx)(LoginForm,{role:e,onBack:handleBackToWelcome,onSwitchToSignup:()=>{a(null),r(e)}}):n?(0,t.jsx)(SignupForm,{role:n,onBack:handleBackToWelcome,onSwitchToLogin:()=>{r(null),a(n)}}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Booking Platform"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Choose your role to continue"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:()=>handleLoginClick("admin"),className:"w-full btn-primary text-lg py-3",children:"\uD83D\uDD10 Login as Admin"}),(0,t.jsx)("button",{onClick:()=>handleLoginClick("user"),className:"w-full btn-secondary text-lg py-3",children:"\uD83D\uDC64 Login as User"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["New to the platform?"," ",(0,t.jsx)("button",{onClick:()=>handleSignupClick("user"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up as User"})," or ",(0,t.jsx)("button",{onClick:()=>handleSignupClick("admin"),className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up as Admin"})]})})]})})})}},9727:function(e,a,n){"use strict";n.d(a,{H6:function(){return removeAuthToken},bW:function(){return getAuthToken},kv:function(){return r},uB:function(){return setAuthToken}});var t=n(4771),s=n(1490);n(2265);let r={login:async(e,a)=>{let n=await t.Z.post("/auth/login",{email:e,password:a});return n.data},register:async(e,a,n,s)=>{let r=await t.Z.post("/auth/register",{name:e,email:a,password:n,role:s});return r.data},getCurrentUser:async()=>{let e=s.Z.get("token"),a=await t.Z.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});return a.data}},setAuthToken=e=>{s.Z.set("token",e,{expires:7})},removeAuthToken=()=>{s.Z.remove("token")},getAuthToken=()=>s.Z.get("token")},4771:function(e,a,n){"use strict";var t=n(4829),s=n(1490),r=n(5267);let l=t.Z.create({baseURL:"https://kretoss-task.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{var a;(null===(a=e.url)||void 0===a?void 0:a.includes("health"))||(0,r.VO)();let n=s.Z.get("token");if(n){let a=e.headers||{};a.Authorization="Bearer ".concat(n),e.headers=a}return e},e=>((0,r.Gx)(),Promise.reject(e))),l.interceptors.response.use(e=>((0,r.Gx)(),e),e=>{var a;return(0,r.Gx)(),(null===(a=e.response)||void 0===a?void 0:a.status)===401&&(s.Z.remove("token"),window.location.href="/"),Promise.reject(e)}),a.Z=l},5267:function(e,a,n){"use strict";n.d(a,{Gx:function(){return hideLoader},RF:function(){return isLoaderVisible},VO:function(){return showLoader},Yb:function(){return subscribeLoader}});let t=!1,s=new Set;function showLoader(){t||(t=!0,s.forEach(e=>e(!0)))}function hideLoader(){t&&(t=!1,s.forEach(e=>e(!1)))}function subscribeLoader(e){return s.add(e),()=>s.delete(e)}function isLoaderVisible(){return t}}},function(e){e.O(0,[745,971,864,744],function(){return e(e.s=9827)}),_N_E=e.O()}]);