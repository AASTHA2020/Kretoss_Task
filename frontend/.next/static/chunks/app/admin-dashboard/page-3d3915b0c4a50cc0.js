(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{3729:function(e,s,t){Promise.resolve().then(t.bind(t,1065))},1065:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return AdminDashboard}});var r=t(7437),a=t(2265),n=t(4033),l=t(9727),o=t(4771);let i={getStats:async()=>{let e=await o.Z.get("/admin/stats");return e.data},getUsersCount:async()=>(await o.Z.get("/admin/users/count")).data,getEventsCount:async()=>(await o.Z.get("/admin/events/count")).data,getBookingsCount:async()=>(await o.Z.get("/admin/bookings/count")).data,getEvents:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=await o.Z.get("/admin/events",{params:{page:e,limit:s,status:t}});return r.data}};var d=t(4337);function AdminDashboard(){let[e,s]=(0,a.useState)(null),[t,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),[h,x]=(0,a.useState)(!0),m=(0,n.useRouter)();return((0,a.useEffect)(()=>{let checkAuth=async()=>{let e=(0,l.bW)();if(!e){m.push("/");return}try{let e=await l.kv.getCurrentUser();if("admin"!==e.user.role){(0,l.H6)(),m.push("/");return}s(e.user)}catch(e){(0,l.H6)(),m.push("/")}finally{o(!1)}};checkAuth()},[m]),(0,a.useEffect)(()=>{let s=null,loadStats=async()=>{try{x(!0);let e=await i.getStats();u(e)}catch(e){console.error("Error loading stats:",e),u({totalUsers:0,totalEvents:0,totalBookings:0})}finally{x(!1)}};return e&&(loadStats(),(s=(0,d.ZP)("https://kretoss-task.onrender.com")).on("admin:stats-updated",()=>{loadStats()})),()=>{s&&s.disconnect()}},[e]),t)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,r.jsx)("button",{onClick:()=>{(0,l.H6)(),m.push("/")},className:"btn-secondary",children:"Logout"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h?(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-8 w-16 rounded"}):(null==c?void 0:c.totalUsers)||0})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Events"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h?(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-8 w-16 rounded"}):(null==c?void 0:c.totalEvents)||0})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300 border border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Bookings"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h?(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-8 w-16 rounded"}):(null==c?void 0:c.totalBookings)||0})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})})]})})]})]}),(0,r.jsxs)("div",{className:"mt-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("button",{onClick:()=>m.push("/admin/events"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-200 group",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:bg-blue-200 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:"Create Event"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Add new event"})]})]})}),(0,r.jsx)("button",{onClick:()=>m.push("/admin/events"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-green-200 group",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-green-100 rounded-xl group-hover:bg-green-200 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 group-hover:text-green-600 transition-colors",children:"Manage Events"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"View all events"})]})]})}),(0,r.jsx)("button",{onClick:()=>m.push("/admin/users"),className:"bg-white rounded-xl shadow-lg p-6 text-left hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-purple-200 group",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:bg-purple-200 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 group-hover:text-purple-600 transition-colors",children:"Manage Users"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"User management"})]})]})})]})]})]})]})}},9727:function(e,s,t){"use strict";t.d(s,{H6:function(){return removeAuthToken},bW:function(){return getAuthToken},kv:function(){return n},uB:function(){return setAuthToken}});var r=t(4771),a=t(1490);t(2265);let n={login:async(e,s)=>{let t=await r.Z.post("/auth/login",{email:e,password:s});return t.data},register:async(e,s,t,a)=>{let n=await r.Z.post("/auth/register",{name:e,email:s,password:t,role:a});return n.data},getCurrentUser:async()=>{let e=a.Z.get("token"),s=await r.Z.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});return s.data}},setAuthToken=e=>{a.Z.set("token",e,{expires:7})},removeAuthToken=()=>{a.Z.remove("token")},getAuthToken=()=>a.Z.get("token")},4771:function(e,s,t){"use strict";var r=t(4829),a=t(1490),n=t(5267);let l=r.Z.create({baseURL:"https://kretoss-task.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{var s;(null===(s=e.url)||void 0===s?void 0:s.includes("health"))||(0,n.VO)();let t=a.Z.get("token");if(t){let s=e.headers||{};s.Authorization="Bearer ".concat(t),e.headers=s}return e},e=>((0,n.Gx)(),Promise.reject(e))),l.interceptors.response.use(e=>((0,n.Gx)(),e),e=>{var s;return(0,n.Gx)(),(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(a.Z.remove("token"),window.location.href="/"),Promise.reject(e)}),s.Z=l},5267:function(e,s,t){"use strict";t.d(s,{Gx:function(){return hideLoader},RF:function(){return isLoaderVisible},VO:function(){return showLoader},Yb:function(){return subscribeLoader}});let r=!1,a=new Set;function showLoader(){r||(r=!0,a.forEach(e=>e(!0)))}function hideLoader(){r&&(r=!1,a.forEach(e=>e(!1)))}function subscribeLoader(e){return a.add(e),()=>a.delete(e)}function isLoaderVisible(){return r}}},function(e){e.O(0,[745,337,971,864,744],function(){return e(e.s=3729)}),_N_E=e.O()}]);